FROM python:3.9

COPY ./Pipfile /api/
WORKDIR /api/
RUN pip install pipenv
RUN pipenv lock
RUN pipenv install --system --deploy --ignore-pipfile
RUN pip install tweepy

# install twint
# this is done with pip, because the --system
# flag in pipenv can't be used on single dependencies
# RUN pip install git+https://github.com/twintproject/twint.git#egg=twint
# RUN pip install git+https://github.com/Museum-Barberini/twint.git@fix/RefreshTokenException#egg=twint

COPY . /api/
